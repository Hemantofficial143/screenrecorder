import{o as i,f as d,a as u,u as h,w as p,F as c,Z as b,b as e,i as f,C as y,D as m,t as n,d as g}from"./app-CYobhoqy.js";import{_}from"./AuthenticatedLayout-CIzUIEpq.js";import"./ApplicationLogo-ptAQUJAQ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const v=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Recordings",-1),B={class:"py-12"},w={class:"text-gray-600 body-font"},x={class:"grid grid-cols-4 gap-4"},k=e("option",{selected:""},"select codec type",-1),R=["value"],T={class:"material-symbols-outlined mr-1"},D={class:"container px-5 py-24 mx-auto"},S={class:"grid grid-cols-4 gap-4"},F={class:"bg-gray-100 p-6 rounded-lg"},N=["src"],A=e("h3",{class:"tracking-widest text-indigo-500 text-xs font-medium title-font"}," SUBTITLE",-1),E=e("h2",{class:"text-lg text-gray-900 font-medium title-font mb-4"},"San Francisco",-1),L=e("p",{class:"leading-relaxed text-base"},"Fingerstache flexitarian street art 8-bit waistcoat. Distillery hexagon disrupt edison bulbche.",-1);let a,l;const P={data(){return{recordButton:{disabled:!1,inProgress:!1,text:"Start recording",error:"",mimeType:"video/mp4"},options:{mimeTypes:["video/webm;codecs=vp9,opus","video/webm;codecs=vp8,opus","video/webm;codecs=h264,opus","video/webm;codecs=av01,opus","video/mp4;codecs=h264,aac","video/mp4;codecs=avc1,mp4a.40.2","video/mp4"]},recordedBlobs:[],list:[]}},computed:{recordIcon(){return this.recordButton.inProgress?"stop_circle":"radio_button_checked"}},methods:{handleDataAvailable(t){t.data&&t.data.size>0&&this.recordedBlobs.push(t.data)},handleOnStop(){this.recordButton.inProgress=!1,this.recordButton.text="Start Recording",l.getTracks().forEach(t=>t.stop()),setTimeout(()=>{const t=new Blob(this.recordedBlobs,{type:this.recordButton.mimeType});this.uploadRecording(t),this.list.unshift({link:window.URL.createObjectURL(t)})},1e3)},async startRecording(){try{const o={mimeType:this.recordButton.mimeType};l=await navigator.mediaDevices.getDisplayMedia({video:!0}),a=new MediaRecorder(l),a.ondataavailable=r=>this.handleDataAvailable(r),a.onstop=r=>this.handleOnStop(r),a.start(),this.recordButton.inProgress=!0,this.recordButton.text="Stop Recording"}catch(t){t.name==="NotAllowedError"?this.recordButton.error="You need to allow access to screen sharing to proceed.":t.name==="NotFoundError"?this.recordButton.error="No media tracks of the specified type were found.":this.recordButton.error="An error occurred while trying to get the display media.",setTimeout(()=>{this.recordButton.error=""},3e3)}},async uploadRecording(t){const o=new FormData;o.append("recording",t),await axios.post("/recordings/upload",o,{})},stopRecording(){a.stop()},clickRecord(){this.recordButton.inProgress?this.stopRecording():(this.recordedBlobs=[],this.startRecording())}},mounted(){this.list=this.recordings}},C=Object.assign(P,{__name:"List",props:{recordings:{type:Array,default:[]}},setup(t){return(o,r)=>(i(),d(c,null,[u(h(b),{title:"Recordings"}),u(_,null,{header:p(()=>[v]),default:p(()=>[e("div",B,[e("section",w,[e("div",x,[e("div",null,[f(e("select",{id:"countries_multiple","onUpdate:modelValue":r[0]||(r[0]=s=>o.recordButton.mimeType=s),class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[k,(i(!0),d(c,null,m(o.options.mimeTypes,s=>(i(),d("option",{value:s},n(s),9,R))),256))],512),[[y,o.recordButton.mimeType]])]),e("div",null,[e("button",{type:"button",onClick:r[1]||(r[1]=(...s)=>o.clickRecord&&o.clickRecord(...s)),class:"text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800 inline-flex items-center"},[e("span",T,n(o.recordIcon),1),g(" "+n(o.recordButton.text),1)])])]),g(" "+n(o.recordButton.error)+" ",1),e("div",D,[e("div",S,[(i(!0),d(c,null,m(o.list,s=>(i(),d("div",null,[e("div",F,[e("video",{src:s.link,controls:"",class:"h-40 rounded w-full object-cover object-center mb-6"},null,8,N),A,E,L])]))),256))])])])])]),_:1})],64))}});export{C as default};
